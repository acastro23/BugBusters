<!DOCTYPE html>
<html lang="en">
<head>
  <title>Enter Confirmation</title>
  <style>
    /* Make the body and html take up the full height */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      display: flex;
      flex-direction: column;
    }

    /* Main content area */
    .content {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .navbar {
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #6F4E37;
      width: 100%;
      padding: 10px 0;
      position: fixed;
      top: 0;
      z-index: 1000;
    }

    .navbar a {
      color: white;
      text-decoration: none;
      padding: 14px 16px;
      font-size: 20px;
    }

    .navbar a:hover {
      background: #ddd;
      color: black;
    }

    .confirmation-container {
      text-align: center;
      padding: 40px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background-color: #fff;
      max-width: 300px;
      width: 100%;
      margin-top: 100px;
    }

    .form-field {
      margin-bottom: 20px;
    }

    .form-field input {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    button {
      background-color: #6F4E37;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      width: 100%;
    }

    /* Footer styling */
    .footer {
      background-color: #6F4E37;
      color: white;
      text-align: center;
      padding: 10px 0;
      font-size: 14px;
    }
  </style>
</head>
<body>
<!-- Navbar -->
<div class="navbar">
  <a href="home.html">Home</a>
  <a href="booking.html">Reserve Your Stay</a>
</div>

<!-- Main content area -->
<div class="content">
  <div class="confirmation-container">
    <h2>Enter Your Confirmation Number</h2>
    <form id="confirmationForm">
      <div class="form-field">
        <input type="text" id="confirmationNumber" placeholder="Confirmation Number" required>
      </div>
      <button type="submit">Enter</button>
    </form>
  </div>
</div>

<script>
  document.getElementById("confirmationForm").addEventListener("submit", function (event) {
  event.preventDefault(); // Prevent form submission from reloading the page

  const confirmationNumber = document.getElementById("confirmationNumber").value;

  if (!confirmationNumber) {
      alert("Please enter a confirmation number.");
      return;
  }

  // Fetch booking details using the confirmation number
  fetch(`/api/bookings/details?confNum=${confirmationNumber}`, {
      method: "GET",
      headers: {
          "Content-Type": "application/json",
      },
  })
  .then(response => response.json())
  .then(data => {
      if (data) {
          // Save booking details to sessionStorage and redirect to summary page
          sessionStorage.setItem("confirmationDetails", JSON.stringify(data));
          window.location.href = "summaryconfirmation.html";
      } else {
          alert("No reservation found with this confirmation number.");
      }
  })
  .catch(error => {
      console.error("Error fetching reservation details:", error);
      alert("An error occurred while fetching your booking details. Please try again.");
  });
});


</script>

<!-- Footer Section -->
<div class="footer">
  &copy; 2024 Woods Inn, Inc
</div>
</body>
</html>

